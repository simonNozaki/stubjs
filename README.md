# stubjs
nodejsによる、スタブのREST APIサーバです。  
固定のレスポンスを、URIおよびHTTPメソッドに応じて柔軟に返します。

# 1. 使い方
## 1-1. 設定方法
`config/resource/server-config.json`を必要に応じて書き換える。  
## 1-2. 設定項目
- `port` : スタブサーバ待受ポート番号。
- `context` : コンテキストパス。APIなどのように、URIにコンテキストをもたせたい場合に設定する。必須ではないです。空文字の場合、単に設定がスキップされます。
- `server` : 返却するリソースの設定。以下項目をもったオブジェクトを配列で指定する。
  - `name` : <要素必須> リソース名。後述のスタブファイルの名前を指定すること。
  - `path` : <要素必須> URIパス。
  - `method` : <要素必須> HTTPメソッド。
  - `responseStatus` : <要素必須> HTTPのステータスコード。指定がある場合、指定されたレスポンスコードで返却する。
### 1-3. スタブファイル
`stub`配下に、JSON形式で配置する。ファイル名は、返却したいURIリソースの`name`に合わせること。
### 1-4. リクエストデータの設定
不要です。stubjsは、どのようなリクエストを受け取るかを全く気にせず、リソースを設定に従って返却します。

# 2. 起動方法
## 2-1. ローカルのnode.jsで起動する
デフォルトで `/healthcheck` メソッドが用意されているので、そのメソッドにリクエストを送信してみます。  
まずは、`node app.js`で起動します。  
curlにて、以下のように結果が返却されればOK。  
リクエスト: 
`curl localhost:18080/healthcheck`  

結果: `{"key":"value"}`
## 2-2. Dockerで起動する
Docker composeで立ち上げることができます。  
`$ docker-compose up`  
でOKです。バックグラウンド起動したい場合は `-d` オプションを付与してください。